!function(e){"use strict";window.GorillaThemes=window.GorillaThemes||{},window.GorillaThemes.validator=null,e(document).ready(function(){var a=e("#sell-your-car");a.length&&window.GorillaThemes.hasOwnProperty("ajaxUrl")&&(window.GorillaThemes.makeModelAjax(),window.GorillaThemes.fileUploadAjax(),window.GorillaThemes.fileRemoveAjax(),window.GorillaThemes.clearAjax(),window.GorillaThemes.initForm(a))}),window.GorillaThemes.makeModelAjax=function(){var a=e("#gt-make"),o=e("#gt-model"),t=o.attr("data-value");a.length&&o.length&&(a.on("change",function(){var i=a.val(),l={action:"gt_ajax_makemodel",cat:i,nonce:window.GorillaThemes.nonce};o.prev(".gt-loading").show(),e.post(window.GorillaThemes.ajaxUrl,l,function(e){e=window.GorillaThemes.sanitizeAJAX(e),e.success===!0&&e.data.options&&e.data.options.length?(o.prop("disabled",!1),o.html(e.data.options),t&&o.val(t).trigger("change",!0)):o.html("").prop("disabled",!0),o.prev(".gt-loading").hide()},"text")}),a.val()&&t&&a.trigger("change",!0))},window.GorillaThemes.fileRemoveAjax=function(){var a=e("#upload-result");a.on("click","a.gt-remove",function(a){var o=e(this),t=o.closest("tr"),i=t.find("td.name").text(),l={action:"gt_ajax_filedelete",nonce:window.GorillaThemes.nonce,name:i};o.hasClass("cleanup")?t.fadeOut(function(){e(this).remove()}):e.post(window.GorillaThemes.ajaxUrl,l,function(a){a=window.GorillaThemes.sanitizeAJAX(a),a.success&&a.success===!0&&(e("#fileupload").prop("disabled",!1),t.fadeOut(function(){e(this).remove()}))},"text"),a.preventDefault(),a.stopPropagation()})},window.GorillaThemes.fileUploadAjax=function(){var a=e("#fileupload"),o=e("#upload-result"),t=o.find("table").find("tbody"),i=5242880;a.fileupload({dropZone:null,url:window.GorillaThemes.ajaxUrl,dataType:"json",singleFileUploads:!0,maxFileSize:i,limitMultiFileUploadSize:i,maxNumberOfFiles:12,minFileSize:void 0,acceptFileTypes:/(\.|\/)(jpe?g|png)$/i,formData:{action:"gt_ajax_fileupload",nonce:window.GorillaThemes.nonce}}).on("fileuploadstart",function(){e("#uploaded-files").show()}).on("fileuploadadd",function(a,o){var i=o.files[0].name,l=window.GorillaThemes.formatFileSize(o.files[0].size),n=e('<tr><td class="thumb"></td><td class="name">'+i+'</td><td class="size">'+l+'</td><td class="status"><span class="gt-loading">Uploading...</span></td><td class="operations"></td></tr>');o.context=n.appendTo(t),o.submit()}).on("fileuploaddone",function(a,o){if(o.result.success){var t=o.result.data.file;o.context.find("td.thumb").html('<img class="gt-thumb" src="'+t.url+'" />'),o.context.find("td.status").html('<span class="gt-success">Complete</span>'),o.context.find("td.operations").html('<a class="gt-remove button tiny round alert" href="javascript:;">Remove</a>'),1==o.result.data.disable&&e("#fileupload").prop("disabled",!0)}else o.context.find("td.status").html('<span class="gt-error">'+o.result.data.msg+"</span>"),o.context.find("td.operations").html('<a class="gt-remove button tiny round alert cleanup" href="javascript:;">Remove</a>'),99==o.result.data.code&&e("#fileupload").prop("disabled",!0)})},window.GorillaThemes.clearAjax=function(){e("#gt-clear").on("click",function(a){var o={action:"gt_ajax_clear",nonce:window.GorillaThemes.nonce};e.post(window.GorillaThemes.ajaxUrl,o,function(e){e=window.GorillaThemes.sanitizeAJAX(e),e.success&&e.success===!0&&window.location.reload()},"text"),a.preventDefault(),a.stopPropagation()})},window.GorillaThemes.initForm=function(a){jQuery.validator.addMethod("selectcheck",function(e){return-1!=e},"This field is required."),window.GorillaThemes.validator=a.on("submit",function(e){e.preventDefault(),e.stopPropagation()}).validate({rules:{model:{selectcheck:!0},make:{selectcheck:!0},type:{selectcheck:!0},fileupload:{accept:"image/*"}},submitHandler:function(a){var o=e(a),t=o.serialize(),i=e("#gt-submit",o),l=e("#gt-clear",o);l.prop("disabled",!0),i.prop("disabled",!0).next(".gt-loading").show(),t+="&action=gt_ajax_submit",e.post(window.GorillaThemes.ajaxUrl,t,function(a){a=window.GorillaThemes.sanitizeAJAX(a),a.success===!0?o.fadeOut(function(){e(".gt-paypal").slideDown()}):window.GorillaThemes.displayFormErrors(a.data?a.data:{security_code3:"An unknown error ocurred please contact technical support"}),l.prop("disabled",!1),i.prop("disabled",!1).next(".gt-loading").hide()},"text")}})},window.GorillaThemes.displayFormErrors=function(e){var a={};for(var o in e)a[o]=e[o];window.GorillaThemes.validator.showErrors(a)},window.GorillaThemes.formatFileSize=function(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" GB":e>=1e6?(e/1e6).toFixed(2)+" MB":(e/1e3).toFixed(2)+" KB"},window.GorillaThemes.sanitizeAJAX=function(e){var a=e.indexOf("{");return 0!==a&&(e=e.substr(a)),a=e.lastIndexOf("}"),a!==e.length&&(e=e.substr(0,a+1)),jQuery.parseJSON(e)}}(jQuery);